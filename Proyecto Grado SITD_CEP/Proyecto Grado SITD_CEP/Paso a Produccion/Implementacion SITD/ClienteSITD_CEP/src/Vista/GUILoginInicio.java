/*
 * Sistema de Información para la toma de Decisiones
 * Centro de Educación Permanente
 * Autor: 
 * Yesid Camilo Ortiz Castillo 
 */
package Vista;

import Controlador.ControlLogin;
import Modelo.IServicioGeneralSITD;
import java.rmi.RemoteException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;

/**
 *
 * @author kmilo
 */
public class GUILoginInicio extends javax.swing.JFrame {

  private IServicioGeneralSITD servicioGeneral;
  private ControlLogin controlLogin;

  /** Creates new form GUILoginInicio */
  public GUILoginInicio(IServicioGeneralSITD servicioGeneral) {
    initComponents();
    this.servicioGeneral = servicioGeneral;
    controlLogin = new ControlLogin(servicioGeneral);
    this.setLocationRelativeTo(null);
  }

  /** This method is called from within the constructor to
   * initialize the form.
   * WARNING: Do NOT modify this code. The content of this method is
   * always regenerated by the Form Editor.
   */
  @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        panelGeneral = new javax.swing.JPanel();
        labelUsuarioLogin = new javax.swing.JLabel();
        labelContraseñaLogin = new javax.swing.JLabel();
        TextBoxUsuario = new javax.swing.JTextField();
        textBoxPasswd = new javax.swing.JPasswordField();
        BtnIngresoLogin = new javax.swing.JButton();
        labelImgCEP = new javax.swing.JLabel();
        LabelTituloLogin = new javax.swing.JLabel();
        menuPrincipal = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        MenuLoginSalir = new javax.swing.JMenuItem();
        jMenu2 = new javax.swing.JMenu();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("SITD CEP");

        panelGeneral.setBackground(new java.awt.Color(255, 255, 255));
        panelGeneral.setFont(new java.awt.Font("Calibri", 0, 14));

        labelUsuarioLogin.setFont(new java.awt.Font("Calibri", 1, 14));
        labelUsuarioLogin.setText("Usuario");

        labelContraseñaLogin.setFont(new java.awt.Font("Calibri", 1, 14));
        labelContraseñaLogin.setText("Contraseña");

        TextBoxUsuario.setFont(new java.awt.Font("Calibri", 0, 14));

        textBoxPasswd.setFont(new java.awt.Font("Calibri", 0, 14));

        BtnIngresoLogin.setFont(new java.awt.Font("Calibri", 3, 14)); // NOI18N
        BtnIngresoLogin.setText("Ingresar");
        BtnIngresoLogin.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                BtnIngresoLoginActionPerformed(evt);
            }
        });

        labelImgCEP.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Imagenes/cep.jpg"))); // NOI18N

        LabelTituloLogin.setFont(new java.awt.Font("Calibri", 3, 24)); // NOI18N
        LabelTituloLogin.setText("Sistema de Información para la Toma de Decisiones CEP");

        javax.swing.GroupLayout panelGeneralLayout = new javax.swing.GroupLayout(panelGeneral);
        panelGeneral.setLayout(panelGeneralLayout);
        panelGeneralLayout.setHorizontalGroup(
            panelGeneralLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelGeneralLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(panelGeneralLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(panelGeneralLayout.createSequentialGroup()
                        .addGroup(panelGeneralLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(BtnIngresoLogin, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, panelGeneralLayout.createSequentialGroup()
                                .addGroup(panelGeneralLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(labelContraseñaLogin)
                                    .addComponent(labelUsuarioLogin))
                                .addGap(25, 25, 25)
                                .addGroup(panelGeneralLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(TextBoxUsuario, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 305, Short.MAX_VALUE)
                                    .addComponent(textBoxPasswd, javax.swing.GroupLayout.DEFAULT_SIZE, 305, Short.MAX_VALUE))))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(labelImgCEP))
                    .addComponent(LabelTituloLogin))
                .addContainerGap())
        );
        panelGeneralLayout.setVerticalGroup(
            panelGeneralLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelGeneralLayout.createSequentialGroup()
                .addGap(21, 21, 21)
                .addComponent(LabelTituloLogin)
                .addGap(18, 18, 18)
                .addGroup(panelGeneralLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(labelImgCEP)
                    .addGroup(panelGeneralLayout.createSequentialGroup()
                        .addGap(32, 32, 32)
                        .addGroup(panelGeneralLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(labelUsuarioLogin)
                            .addComponent(TextBoxUsuario, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(panelGeneralLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(labelContraseñaLogin)
                            .addComponent(textBoxPasswd, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(BtnIngresoLogin)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jMenu1.setText("Archivo");

        MenuLoginSalir.setText("Salir");
        jMenu1.add(MenuLoginSalir);

        menuPrincipal.add(jMenu1);

        jMenu2.setText("Ayuda ?");
        menuPrincipal.add(jMenu2);

        setJMenuBar(menuPrincipal);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(panelGeneral, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(panelGeneral, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void BtnIngresoLoginActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_BtnIngresoLoginActionPerformed
      String usuario;
      String contrasena;
      int categoria_login = 0;
      if (TextBoxUsuario.getText().trim().equals("") || textBoxPasswd.getText().trim().equals("")) {
        JOptionPane.showMessageDialog(rootPane, "Debe digitar un nombre de usuario y una contraseña\n"
                + "para realizar el Inicio de Sesión", "Campos Incompletos", 0);
      } else {
        usuario = TextBoxUsuario.getText().trim();
        contrasena = textBoxPasswd.getText().trim();
        try {
          categoria_login = controlLogin.InicioSesion(usuario, contrasena);
        } catch (Exception e) {
          System.err.println(e.getMessage());
        }
        switch (categoria_login) {
          case 0:
            JOptionPane.showMessageDialog(rootPane, "El nombre de Usuario y la contraseña ingresadas\n "
                    + "son incorrectas, intente de nuevo", "Datos Incorrectos", 0);
            limpiarCampos();
            break;
          case 1:
            try {
              GUIMenuSuperAdmin guiSuperAdmin = new GUIMenuSuperAdmin(servicioGeneral, this, 1);
              guiSuperAdmin.show();
            } catch (RemoteException ex) {
              Logger.getLogger(GUILoginInicio.class.getName()).log(Level.SEVERE, null, ex);
            }
            break;
          case 2:
            try {
              GUIMenuSuperAdmin guiSuperAdmin = new GUIMenuSuperAdmin(servicioGeneral, this, 2);
              guiSuperAdmin.show();
            } catch (RemoteException ex) {
              Logger.getLogger(GUILoginInicio.class.getName()).log(Level.SEVERE, null, ex);
            }
            break;
          case 3:
            try {
              GUIMenuSuperAdmin guiSuperAdmin = new GUIMenuSuperAdmin(servicioGeneral, this, 3);
              guiSuperAdmin.show();
            } catch (RemoteException ex) {
              Logger.getLogger(GUILoginInicio.class.getName()).log(Level.SEVERE, null, ex);
            }
            break;
          default:
            JOptionPane.showMessageDialog(rootPane, "No se ha creado un menu para esta categoria");
            System.out.println(categoria_login);
            break;
        }
      }
    }//GEN-LAST:event_BtnIngresoLoginActionPerformed
  /**
   * @param args the command line arguments
   */
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton BtnIngresoLogin;
    private javax.swing.JLabel LabelTituloLogin;
    private javax.swing.JMenuItem MenuLoginSalir;
    private javax.swing.JTextField TextBoxUsuario;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JLabel labelContraseñaLogin;
    private javax.swing.JLabel labelImgCEP;
    private javax.swing.JLabel labelUsuarioLogin;
    private javax.swing.JMenuBar menuPrincipal;
    private javax.swing.JPanel panelGeneral;
    private javax.swing.JPasswordField textBoxPasswd;
    // End of variables declaration//GEN-END:variables

  private void limpiarCampos() {
    TextBoxUsuario.setText("");
    textBoxPasswd.setText("");
  }
}
